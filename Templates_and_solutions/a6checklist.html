<!DOCTYPE html>
<html>

<head>
    <title>BTI425 Assignment Checklist</title>
    <meta charset="utf-8" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
        crossorigin="anonymous">

    <style>
        body {
            padding: 1.0em;
            margin: 0;
            font-size: 1.2em;
        }

        .checklist {
            width: 100%;
        }

        tr td,
        tr th {
            padding: 0.5em;
            overflow: auto;
        }

        th {
            font-size: 1.0em;
            background-color: whitesmoke;
        }

        th,
        td {
            border: 1px solid grey;
        }

        .no-storage {
            display: none;
        }

        @media print {
            .no-print,
            .no-print * {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <div class="alert alert-danger no-print no-storage" role="alert">
        This browser doesn't support local storage, so your progress will not be saved automatically.
    </div>
    <h4>BTI425 Winter 2018 Assignment 6 -
        <span id="studentName" contenteditable="true">(replace this with your name)</span>
    </h4>
    <p>Programming assignment checklist - Security features</p>
    <table class="checklist">
        <tr>
            <th class="col-md-9">User interaction and appearance</th>
            <th class="col-md-1">Complete</th>
            <th class="col-md-1">Partial</th>
            <th class="col-md-1">Missing</th>
        </tr>
        <tr>
            <td>What is the URL to your Teams API on Heroku?</td>
            <td colspan="3"><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>U1. Title/landing view looks OK. Includes student name. Appearance shows thought and care.</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>U2. Protected list of "employees" does not appear when not authenticated.</td>
                <td><div contenteditable="true"></div></td>
                <td><div contenteditable="true"></div></td>
                <td><div contenteditable="true"></div></td>
            </tr>
        <tr>
            <td>U3. Login works correctly, and probably redirects to home view.</td>
                <td><div contenteditable="true"></div></td>
                <td><div contenteditable="true"></div></td>
                <td><div contenteditable="true"></div></td>
            </tr>
        <tr>
            <td>U4. After login, can view protected list of "employees".</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>U5. After login, the "view token" view displays useful and correct data.</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>U6. Nav menu includes choices for employees, login, and view token.</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
    </table>
    <p>&nbsp;</p>
    <table class="checklist">
        <tr>
            <th class="col-md-9">Program design and coding</th>
            <th class="col-md-1">Complete</th>
            <th class="col-md-1">Partial</th>
            <th class="col-md-1">Missing</th>
        </tr>
        <tr>
            <td>C1. Route objects correctly declared, in the right sequence.</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>C2. Coding guidance in the "Add security features to an Angular app" document was done correctly.</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>C3. The login component's <code>onSubmit()</code> method is correct, and is functionally similar to the example solution.</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td>C4. Good coding style, nicely-formatted, commented (where appropriate), follows best practices</td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
            <td><div contenteditable="true"></div></td>
        </tr>
    </table>
    <p>&nbsp;</p>
    <table class="checklist">
        <tr>
            <td style="width:50%;">In your opinion, what was the difficulty level of the assignment (Easy, Just right, or Hard)?</td>
            <td style="width:50%;"><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td style="width:50%;">How many hours, in total, did you work on the assignment?</td>
            <td style="width:50%;"><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td style="width:50%;">What was the hardest part (if any)?</td>
            <td style="width:50%;"><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td style="width:50%;">What was the most interesting or satisfying part?</td>
            <td style="width:50%;"><div contenteditable="true"></div></td>
        </tr>
        <tr>
            <td style="width:50%;">Do you have any other feedback?</td>
            <td style="width:50%;"><div contenteditable="true"></div></td>
        </tr>
    </table>
    <p>&nbsp;</p>
    <p>
        <button id="reset" class="btn btn-default no-print" type="reset" onclick="resetForm()">Reset</button>
    </p>

    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>-->
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script>
        var delay = (function () {
            var timer = 0;
            return function (callback, ms) {
                clearTimeout(timer);
                timer = setTimeout(callback, ms);
            };
        })();

        $('body').keyup(function () {
            delay(function () {
                saveOrRepopulate(true);
            }, 3000);
        });

        $(document).ready(
            function () {
                if (typeof (Storage) !== "undefined") {
                    // Code for localStorage/sessionStorage.
                    $(".no-storage").hide();
                    saveOrRepopulate();
                } else {
                    // Sorry! No Web Storage support..
                    $(".no-storage").show();
                    $("#reset").hide();
                }
            }
        )

        if (typeof (Storage) !== "undefined") {
            function saveOrRepopulate(save) {
                var form = [], firstLoad = false, oldForm, btiFormEmpty = false, originalEmpty = false;

                console.log("local:");
                console.log(localStorage);
                //localStorage.originalValues = JSON.stringify(form);

                if (!localStorage.btiForm || localStorage.btiForm === "[]") {
                    btiFormEmpty = true;
                }

                if (!localStorage.originalValues || localStorage.originalValues === "[]") {
                    originalEmpty = true;
                }

                if (!btiFormEmpty && !save) {
                    oldForm = JSON.parse(localStorage.btiForm);
                    $("#studentName").html(localStorage.studentName);
                    $("#comments").html(localStorage.comments);
                }

                if (btiFormEmpty && originalEmpty) {
                    firstLoad = true;
                }

                $(".checklist").each(function (tableI, table) {
                    var rows = $(table).find("tr"), rowData = [];

                    rows.each(function (rowI, row) {
                        var cells = $(row).find("td"), cellData = [];

                        cells.each(function (cellI, cell) {
                            var divs = $(cell).find("div"), i, divData = [];

                            for (i = 0; i < divs.length; i++) {
                                if (save || firstLoad) {
                                    divData.push($(divs[i]).html());
                                    console.log("first/save");
                                } else {
                                    console.log("repopulating");
                                    if (oldForm && oldForm[tableI] && oldForm[tableI][rowI] &&
                                        oldForm[tableI][rowI][cellI] && oldForm[tableI][rowI][cellI][i]) {
                                        $(divs[i]).html(oldForm[tableI][rowI][cellI][i]);
                                    } else {
                                        $(divs[i]).html("");
                                    }
                                }
                            }

                            cellData.push(divData)
                        })

                        rowData.push(cellData);

                    });

                    if (rowData) {
                        form.push(rowData);
                    }

                });

                if (firstLoad) {
                    console.log("first load...");
                    console.log(form);
                    console.log("local original");
                    console.log(localStorage.originalValues);
                    localStorage.originalValues = JSON.stringify(form);
                }

                if (save) {
                    localStorage.btiForm = JSON.stringify(form);
                }

                localStorage.studentName = $("#studentName").html();
                localStorage.comments = $("#comments").html();
            }

            function resetForm() {
                localStorage.btiForm = [];//localStorage.originalValues;

                localStorage.studentName = "";
                $("#studentName").html("(replace this with your name)");

                localStorage.comments = "";
                $("#comments").html("");

                saveOrRepopulate();
            }
        }
    </script>
</body>

</html>